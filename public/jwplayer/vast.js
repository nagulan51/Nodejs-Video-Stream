!function(){"use strict";function t(t){for(;t.length>0;){var e=t.pop();e.parentNode&&e.parentNode.removeChild(e)}}function e(t,e,i,s){var n=document.createElement("iframe");n.src="javascript:false",t.style(n,{border:0,width:"100%",height:"100%",position:"absolute",overflow:"hidden"}),n.scrolling="no";var a=i.getElementsByClassName("jw-media")[0];a.appendChild(n);var r=n.contentWindow.document;return r.open().write("\n    <body onload=\"\n        var js = document.createElement('script');\n        js.src = '"+e+"';\n        js.addEventListener('load', function() { window.myCallback(); });\n        document.body.appendChild(js);\"\n    style=\"margin: 0\">"),n.contentWindow.myCallback=s,r.close(),n}function i(t){var e=[];return ie.map(t,function(t){var i="iframe"===t.type||"html"===t.type?t.type:"static",s=void 0;t.trackers&&t.trackers.creativeView&&t.trackers.creativeView.length&&(s=t.trackers.creativeView),e.push({width:t.width,height:t.height,type:i,resource:t.source,creativeview:s,click:t.clickthrough})}),e}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[];return ie.map(t,function(t){t.type.indexOf("flash")<0&&e.push(t)}),e}function n(t){return"application/javascript"===t.type||"application/x-javascript"===t.type}function a(t){return n(t)?"html5":"flash"}function r(t,e){for(var i=void 0,s="flash"===e,n=0;n<t.media.length;n++){var r=t.media[n];if(s){i=r;break}if("html5"===a(r)){i=r;break}}return i}function o(t,e){t.tracker=new ee(t.trackers,e)}function d(t,e){var i=void 0;return i="flash"===e?ie.where(jwplayer.api.availableProviders,{name:"flash"}):ie.filter(jwplayer.api.availableProviders,function(t){return"flash"!==t.name}),ie.filter(t,function(t){return ie.some(i,function(e){return e.supports(t)})})}function l(t,e,i){var s=document.createElement("param");s.setAttribute("name",e),s.setAttribute("value",i),t.appendChild(s)}function h(t,e,i){var s=void 0;return oe.foreach(t,function(t,e){s=s||{},"_adQueue"===t?s[t]=e.slice():s[t]=e}),s&&(s.requestTimeout=e,s.creativeTimeout=i),s}function p(t,e){return"%"===t.toString().slice(-1)?e*parseFloat(t.slice(0,-1))/100:parseFloat(t)}function u(t){return he.isString(t)?[t]:he.isArray(t)?t.slice(0):t}function c(t){if("start"===t||"0%"===t)return"pre";if("end"===t||"100%"===t)return"post";if("pre"===t||"post"===t||he.indexOf(t,"%")>-1)return t;var e=pe.seconds(t);return!!he.isNumber(e)&&e}function f(t,e){return 0===t?1/0:t||e}function m(t,e){var i=e.schedule||e.adschedule;he.each(i,function(i){i.ad&&(pe.extend(i,i.ad),delete i.ad);var s=c(i.offset),n=f(i.requestTimeout,st),a=f(i.creativeTimeout,nt),r={_offSet:s,_type:i.type,requestTimeout:n,creativeTimeout:a};s===!1&&pe.log("Error: ad offset format not supported",s);var o=i.skipoffset||e.skipoffset;he.isUndefined(o)||(r.skipoffset=o);var d=i.adbreakid;d&&(r.adbreakid=d);var l=i.adtagid;if(l&&(r._adTagQueue=u(l)),i.tag)r._adQueue=u(i.tag),r._waterfallIndex=0;else{if(!he.isString(i.vastxml))return void pe.log("Error: no ad tag provided");r._adXML=i.vastxml}switch(s){case"pre":t.setPreRoll(r);break;case"post":t.setPostRoll(r);break;default:t.addMidRoll(r)}})}function v(t,e){ce.style(t,{opacity:e||1})}function y(t){ce.style(t,{opacity:0})}function g(){v(ve)}function A(){v(ve,.75)}function P(){v(me)}function k(){v(me,.5)}function T(t,e){for(var i=w(t,"AdBreak",it),s=t.lookupNamespaceURI(it),n=0;n<i.length;n++){var a={},r={},o=i[n],d=b(o,"timeOffset"),l=b(o,"breakId"),h=b(o,"breakType"),p=w(o,"AdSource",it)[0],u=b(p,"id"),c=w(o,"AdTagURI",it)[0],f=w(o,"VASTData",it)[0]||w(o,"VASTAdData",it)[0],m=b(c,"templateType"),v=I(c),y=E(s,o,"Tracking",it);if(a._type=h,a._vmap={id:u,breakid:l,timeoffset:d},f)a._adXML=w(f,"VAST")[0];else{if("vast1"!==m&&"vast2"!==m&&"vast3"!==m)continue;a._adQueue=[v],a._waterfallIndex=0}if(y)for(var g=0;g<y.length;g++)_(r,y[g]);switch(a._trackers=r,a._type=h,d){case"start":a._offSet="pre",e.setPreRoll(a);break;case"100%":case"end":a._offSet="post",e.setPostRoll(a);break;default:if(/^#/.test(d))break;/^\d\d?(?:\.\d+)?%$/.test(d)?a._offSet=d:a._offSet=Te.seconds(d),e.addMidRoll(a)}}e.sortVmap()}function w(t,e,i){var s=[];return t&&(s=t.getElementsByTagName(e),i&&s&&0===s.length&&(s=t.getElementsByTagName(i+":"+e))),s}function E(t,e,i,s){var n=[];return t||e?n=e.getElementsByTagNameNS?e.getElementsByTagNameNS(t,i):e.getElementsByTagName(s+":"+i):n}function b(t,e){return t?t.getAttribute(e):null}function _(t,e){var i=b(e,"event");if("progress"===i){var s=b(e,"offset");i=i+"_"+s}var n=I(e);C(t,i,n)}function I(t){if(t){var e=t.textContent||t.text;if(e)return Te.trim(e)}return""}function C(t,e,i){t[e]||(t[e]=[]),i&&t[e].push(i)}function S(t,e,i){var s=w(t,e);we.map(s,function(t){C(i,e.toLowerCase(),I(t))})}function x(t){var e=w(w(t,"Creatives")[0],"Creative"),i={},s={trackers:i};return s.adsystem=I(w(t,"AdSystem")[0]),we.map(e,function(t){var e=w(t,"Linear")[0],n=w(t,"NonLinear")[0],a=w(w(t,"TrackingEvents")[0],"Tracking");(e||n)&&we.map(a,function(t){_(i,t)});var r=I(w(t,"AdParameters")[0]);if(r&&(s.adParams=r),e){var o=w(e,"VideoClicks")[0],d=I(w(o,"ClickThrough")[0]),l=w(o,"ClickTracking"),h=b(e,"skipoffset");we.map(l,function(t){C(i,"click",I(t))}),d&&(s.clickthrough=d),h&&(s.skipoffset=h),R(e,s)}else if(n){var p=I(w(n,"NonLinearClickThrough")[0]);p&&(s.clickthrough=p),L(t,s)}else M(t,s)}),s}function V(t){var e=w(t,"Video")[0]||t,i=w(t,"NonLinear")[0],s={},n={trackers:s};if(e){var a=w(w(t,"TrackingEvents")[0],"Tracking");we.map(a,function(t){_(s,t)});var r=w(w(t,"Impression")[0],"URL");we.map(r,function(t){C(s,"impression",I(t))});var o=w(w(t,"Error")[0],"URL");we.map(o,function(t){C(s,"error",I(t))});var d=w(e,"VideoClicks")[0],l=I(w(d,"ClickThrough")[0]),h=w(w(d,"ClickTracking")[0],"URL");we.map(h,function(t){C(s,"click",I(t))}),l&&(n.clickthrough=l),R(e,n);var p=w(e,"AdParameters")[0];if(p){var u=b(p,"apiFramework");"vpaid"===u.toLowerCase()&&(we.map(n.media,function(t){t.adType=u}),n.adParams=I(p))}}if(i){var c=n.media||[],f=w(i,"URL")[0];c.push({type:b(i,"creativeType"),file:I(f),adType:b(i,"apiFramework")}),n.media=c}var m=w(t,"CompanionAds")[0];return m=w(m,"Companion"),n.companions||(n.companions=[]),we.map(m,function(t){n.companions.push({width:parseInt(b(t,"width"),10),height:parseInt(b(t,"height"),10),type:b(t,"resourceType"),resource:I(w(t,"URL")[0]),trackers:[],clickthrough:""})}),n}function R(t,e){var i=w(w(t,"MediaFiles")[0],"MediaFile"),s=e.media?e.media:[];we.map(i,function(t){var e={type:b(t,"type"),file:I(t),adType:b(t,"apiFramework")||"",width:parseInt(b(t,"width"),10)||0,height:parseInt(b(t,"height"),10)||0};e.file&&s.push(e)}),e.media=s}function L(t,e){var i=[],s=w(t,"StaticResource")[0];s&&(i.push({type:b(s,"creativeType"),file:I(s),adType:b(w(t,"NonLinear")[0],"apiFramework")||"static",minDuration:b(w(t,"NonLinear")[0],"minSuggestedDuration")||"00:00:00"}),e.media=i)}function M(t,e){var i=w(w(t,"CompanionAds")[0],"Companion"),s=e.companions?e.companions:[];we.map(i,function(t){var e=w(t,"StaticResource")[0],i=w(t,"IFrameResource")[0],n=w(t,"HTMLResource")[0],a={},r=void 0,o=void 0;if(e)r=b(e,"creativeType"),o=I(e);else if(i)r="iframe",o=I(i);else{if(!n)return;r="html",o=I(n)}var d=w(w(t,"TrackingEvents")[0],"Tracking");we.map(d,function(t){var e=b(t,"event");C(a,e,I(t))});var l=I(w(t,"CompanionClickThrough")[0]);s.push({width:parseInt(b(t,"width"),10),height:parseInt(b(t,"height"),10),type:r,source:o,trackers:a,clickthrough:l})}),e.companions=s}function H(t,e){var i=Te.extend({},t);return Te.foreach(e,function(t,s){Te.exists(i[t])?"array"===Te.typeOf(s)?i[t]=i[t].concat(s):"object"===Te.typeOf(s)?i[t]=Te.extend(i[t],e[t]):i[t]=s:i[t]=s}),i}function D(t){t&&(t.onload=null,t.onreadystatechange=null,t.onerror=null,t.abort&&t.abort())}function j(t,e,i){var s=[];return i.foreach(e,function(e,n){t.companions&&(n.companions=(n.companions?n.companions:[]).concat(t.companions)),t.trackers&&(n.trackers=O(n.trackers,t.trackers,i)),t.sequence&&(n.sequence=t.sequence),s.push(n)}),s}function O(t,e,i){return t=t||{},i.foreach(e,function(e,i){t[e]?t[e]=t[e].concat(i):t[e]=i}),t}function N(t,e){return F(t)?t:e.parseXML(t)}function F(t){return"object"==typeof Node?t instanceof Node:t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName}function U(t,e,i,s){if(!t)return t;var n=Q(e),a=n.item,r=window.location.href;t=q(t,"__random-number__",Math.random()*Math.pow(10,18)),t=q(t,"__timestamp__",(new Date).getTime()),t=q(t,"__page-url__",encodeURIComponent(r)),t=q(t,"__referrer__",encodeURIComponent(document.referrer)),t=q(t,"__player-height__",n.playerHeight),t=q(t,"__player-width__",n.playerWidth),t=q(t,"__item-duration__",n.itemDuration),t=q(t,"__domain__",encodeURIComponent(i)),t=s.companion?q(t,"__companion-div__",s.companion.id):q(t,"__companion-div__","");for(var o=t.match(new RegExp(/__item-[a-z 0-9 A-Z]*__/g)),d=0;o&&d<o.length;d++){var l=o[d],h=l.substring(7,l.length-2);if(a.hasOwnProperty(h)&&e._.isString(a[h])){var p=a[h];p.length>1e3&&(p=p.substring(0,1e3)),t=q(t,l,encodeURIComponent(p))}else t=q(t,l,"")}return t=B(t)}function B(t){return Ce.test(t)||Se.test(t)?t+="&sdk3p=jwplayer":xe.test(t)&&(t+=";sdk3p=jwplayer"),t}function q(t,e,i){return t.replace(e,i)}function Q(t){var e=t.getConfig();return{playerHeight:t.getHeight()||e.height||"",playerWidth:t.getWidth()||e.width||"",itemDuration:W(t.getDuration(),3)||"",item:e.playlist[t.getPlaylistIndex()]||{}}}function W(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i}function X(t){return t._adQueue&&t._waterfallIndex<t._adQueue.length}var z="vast",K="-1",G="This ad will end in xx seconds.",Y="Ad __AD_POD_CURRENT__ of __AD_POD_LENGTH__. ",$=-1,J="Advertisement",Z="Skip ad in xx",tt="Skip",et="time",it="vmap",st=5e3,nt=15e3,at="state",rt="buffering",ot="paused",dt="idle",lt="playing",ht="complete",pt="fullscreen",ut="volume",ct="mute",ft="error",mt="adClick",vt="adCompanions",yt="adComplete",gt="adError",At="adImpression",Pt="beforePlay",kt="adMeta",Tt="adPause",wt="adPlay",Et="adSkipped",bt="adTime",_t="none",It="auto",Ct={QUARTILE:"quartile",REMAINING_TIME:"remainingTimeChange",SKIPPED:"skipped",STARTED:"started",STOPPED:"stopped",CLICK:"click",PLAY:"play",IMPRESSION:"impression",PAUSE:"pause",ERROR:"error",COMPLETE:"complete",CLOSE:"close",EXPANDED_CHANGE:"expandedChange"},St="AdLoaded",xt="AdImpression",Vt="AdStarted",Rt="AdStopped",Lt="AdLinearChange",Mt="AdExpandedChange",Ht="AdRemainingTimeChange",Dt="AdVideoFirstQuartile",jt="AdVideoMidpoint",Ot="AdVideoThirdQuartile",Nt="AdVideoComplete",Ft="AdClickThru",Ut="AdPaused",Bt="AdPlaying",qt="AdSkipped",Qt="AdError",Wt="fullscreen",Xt="normal",zt=40,Kt=66,Gt=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Yt=function(){function t(e,i,s,n,a,r){var o=this;Gt(this,t),this.player=e,this.utils=e.utils,this._=e._,this.swf=i,this.adTag=n,this.adParams=a,this.vpaidControls=r,this.resumeOnAdStopped=!1,this.paused=!1,this.flashThrottled=!1,this.type="vpaid",this.blocking=null,this.vpaidState={linear:!1,expanded:!1,remainingTime:-1};var d=-1;this._.extend(this,e.Events),this.utils.isChrome()&&this.swf.on("throttle",function(t){clearTimeout(d),"resume"===t.state?(o.flashThrottled=!1,o.onAdPlaying(o.vpaidState),o.setPointerEventsStyle(_t),o.callVPAID("resumeAd")):d=setTimeout(function(){o.setPointerEventsStyle(It),o.callVPAID("pauseAd"),o.onAdPaused(o.vpaidState),o.flashThrottled=!0},250)},this),this.swf.triggerFlash("vast:loadVpaid",s,this.genCallback(this.vpaidLoadSuccess.bind(this)),this.genCallback(this.vpaidError.bind(this)))}return t.prototype.vpaidLoadSuccess=function(){this.setPointerEventsStyle(It),this.addVPAIDListener(St,this.onAdLoaded),this.addVPAIDListener(Vt,this.onAdStarted),this.addVPAIDListener(xt,this.onAdImpression),this.addVPAIDListener(Lt,this.onLinearChange),this.addVPAIDListener(Mt,this.onExpandedChange),this.addVPAIDListener(Ut,this.onAdPaused),this.addVPAIDListener(Bt,this.onAdPlaying),this.addVPAIDListener(Rt,this.onAdStopped),this.addVPAIDListener(Nt,this.onAdComplete),this.addVPAIDListener(Ht,this.onRemainingTimeChangeHandler),this.addVPAIDListener(Ft,this.onAdClick),this.addVPAIDListener(qt,this.onAdSkipped),this.addVPAIDListener(Qt,this.vpaidError),this.addVPAIDListener(Dt,this.onFirstQuartile),this.addVPAIDListener(jt,this.onMidpoint),this.addVPAIDListener(Ot,this.onThirdQuartile);var t=this.player.getSafeRegion(!1);this.callVPAID("initAd",t.width,t.height+t.y,this.fullscreenMode(),0,this.adParams)},t.prototype.setPointerEventsStyle=function(t){this.utils.isIE()&&"PointerEvent"in window&&(this.swf.style.pointerEvents=t)},t.prototype.fullscreenMode=function(){return this.player.getFullscreen()?"fullscreen":"normal"},t.prototype.vpaidError=function(){this.sendEvent(Ct.ERROR)},t.prototype.sendEvent=function(t,e){this.flashThrottled||(e=e||{},e.linear=this.vpaidState.linear?"linear":"nonlinear",e.tag=this.adTag,this.trigger(t,e))},t.prototype.updateVpaidState=function(t){t&&(this._.isBoolean(t.linear)&&(this.vpaidState.linear=t.linear),this._.isBoolean(t.expanded)&&(this.vpaidState.expanded=t.expanded),this._.isNumber(t.remainingTime)&&(this.vpaidState.remainingTime=t.remainingTime))},t.prototype.onAdLoaded=function(t){this.onLinearChange(t),this.setVPAIDProperty("adVolume",this.player.getMute()?0:this.player.getVolume()/100),this.callVPAID("startAd")},t.prototype.onAdStarted=function(t){this.updateVpaidState(t),t.linear&&this.blocking&&!this.vpaidControls&&this.blocking.hide(),this.sendEvent(Ct.STARTED),this.sendEvent(Ct.PLAY,{oldstate:rt,newstate:lt})},t.prototype.onAdImpression=function(t){this.updateVpaidState(t),this.sendEvent(Ct.IMPRESSION)},t.prototype.onAdClick=function(t){this.updateVpaidState(t),this.sendEvent(Ct.CLICK,{url:t.url,playerHandles:t.playerHandles})},t.prototype.onAdSkipped=function(t){this.updateVpaidState(t),this.sendEvent(Ct.SKIPPED)},t.prototype.onLinearChange=function(t){this.updateVpaidState(t);var e=void 0,i=void 0,s=void 0;if(t.linear){if(this.blocking)this.vpaidControls||this.blocking.hide();else{this.resumeOnAdStopped=!0,this.player.setControls(!1);var n=this.player.getState();n!==lt&&n!==rt||this.player.pause(!0)}s=this.player.getSafeRegion(!1),i=s.height+s.y,e=s.width}else this.blocking?(this.blocking.destroy(),this.blocking=null):this.resumeOnAdStopped&&(this.player.play(!0),this.player.setControls(!0)),s=this.player.getSafeRegion(!0),i=s.height+s.y,e=s.width;this.callVPAID("resizeAd",e,i,this.fullscreenMode())},t.prototype.onExpandedChange=function(t){this.updateVpaidState(t),this.sendEvent(Ct.EXPANDED_CHANGE,{expanded:this.vpaidState.expanded})},t.prototype.onAdStopped=function(t){this.updateVpaidState(t),this.resumeOnAdStopped&&(this.player.play(!0),this.player.setControls(!0)),this.setPointerEventsStyle(_t),this.sendEvent(Ct.STOPPED)},t.prototype.onAdComplete=function(){this.setPointerEventsStyle(_t),this.sendEvent(Ct.COMPLETE)},t.prototype.onAdPaused=function(t){this.updateVpaidState(t),this.paused||(this.paused=!0,this.sendEvent(Ct.PAUSE,{newstate:ot,oldstate:lt}))},t.prototype.onAdPlaying=function(t){this.updateVpaidState(t),this.paused&&(this.paused=!1,this.sendEvent(Ct.PLAY,{newstate:lt,oldstate:ot}))},t.prototype.onRemainingTimeChangeHandler=function(t){this.updateVpaidState(t),this.sendEvent(Ct.REMAINING_TIME,{remainingTime:t.remainingTime})},t.prototype.onFirstQuartile=function(t){this.handleQuartile(1,t)},t.prototype.onMidpoint=function(t){this.handleQuartile(2,t)},t.prototype.onThirdQuartile=function(t){this.handleQuartile(3,t)},t.prototype.handleQuartile=function(t,e){this.updateVpaidState(e),this.sendEvent("quartile",{quartile:t,remainingTime:e.remainingTime})},t.prototype.callVPAID=function(){var t=Array.prototype.slice.call(arguments);t.unshift("vast:callVpaid"),this.swf.triggerFlash.apply(this.swf,t)},t.prototype.setVPAIDProperty=function(t,e){this.swf.triggerFlash("vast:setVpaidProperty",t,e)},t.prototype.addVPAIDListener=function(t,e){this.swf.triggerFlash("vast:addVpaidListener",t,this.genCallback(e.bind(this)))},t.prototype.genCallback=function(t){var e=t.name?t.name.replace("bound ",""):"",i=this.player.id+":vast:"+e+":"+Math.random().toString(16).substr(2);return this.swf.on(i,t,this),i},t.prototype.genEvent=function(t){var e=this;return function(i){e.on(t,i)}},t.prototype.setVolume=function(t){this.setVPAIDProperty("adVolume",t/100)},t.prototype.volume=function(){},t.prototype.mute=function(){},t.prototype.play=function(){this.callVPAID("resumeAd")},t.prototype.pause=function(){this.callVPAID("pauseAd")},t.prototype.stop=function(){this.callVPAID("stopAd")},t.prototype.resize=function(){var t=this.player.getSafeRegion(!this.vpaidState.linear);this.callVPAID("resizeAd",t.width,t.height+t.y,this.fullscreenMode())},t.prototype.removeEvents=function(){this.off()},t.prototype.destroy=function(){this.removeEvents(),this.setPointerEventsStyle(_t),this.swf.off(null,null,this),this.blocking=null},t.prototype.getState=function(){return this.vpaidState.linear?this.paused?ot:lt:dt},t}(),$t=function(){function i(t,s,n,a,r){Gt(this,i),this.player=t,this._=t._,this.state=t.state,this.vpaidURL=s,this.adTag=n,this.adParams=a,this.vpaidControls=r,this.type="vpaid",this.blocking=null,this.toRemove=[],this.vpaidState={linear:!1,expanded:!1,remainingTime:-1},this.paused=!1,this._.extend(this,t.Events),this.setMuteCallback=this.setMute.bind(this),this.playerContainer=this.player.getContainer(),this.iframe=e(t.utils,this.vpaidURL,this.playerContainer,this.callback.bind(this)),this.toRemove.push(this.iframe)}return i.prototype.sendEvent=function(t,e){e=e||{},e.tag||(e.tag=this.adTag),this.trigger(t,e)},i.prototype.handleQuartile=function(t,e){this.sendEvent("quartile",{quartile:e,duration:t.getAdDuration()})},i.prototype.genEvent=function(t){var e=this;return function(i){e.on(t,i)}},i.prototype.setMute=function(){this.player.setMute(!this.vpaidAd.getAdVolume())},i.prototype.userActive=function(){var t=this.player.utils.hasClass(this.playerContainer,"jw-flag-time-slider-above");this.player.utils.style(this.iframe,{bottom:t?Kt:zt})},i.prototype.userInactive=function(){"paused"!==this.player.getState()&&this.player.utils.style(this.iframe,{bottom:"0.5em"})},i.prototype.prepareNonlinearAd=function(){var t=!this.player.utils.hasClass(this.playerContainer,"jw-flag-user-inactive");this.player.utils.style(this.iframe,{height:""}),this.userActive(t),this.player.on("userActive",this.userActive,this),this.player.on("userInactive",this.userInactive,this),this.blocking&&(this.blocking.applyProviderListeners(null),this.blocking.destroy(),this.blocking=null)},i.prototype.genListeners=function(e){var i=this;return{AdLoaded:function(){e.startAd()},AdStarted:function(){e.getAdLinear()?i.blocking&&!i.vpaidControls&&i.blocking.hide():i.prepareNonlinearAd(),i.sendEvent("started"),i.sendEvent("play",{oldstate:rt,newstate:lt,linear:e.getAdLinear()?"linear":"nonlinear"}),e.subscribe(i.setMuteCallback,"AdVolumeChange",e)},AdStopped:function(){t(i.toRemove),i.player.setControls(!0),i.sendEvent("stopped")},AdPaused:function(){i.paused||(i.paused=!0,i.sendEvent("pause",{newstate:ot,oldstate:lt}))},AdPlaying:function(){i.paused&&(i.paused=!1,i.sendEvent("play",{newstate:lt,oldstate:ot,linear:e.getAdLinear()?"linear":"nonlinear"}))},AdLinearChange:function(){if(e.getAdLinear())if(i.player.utils.style(i.iframe,{height:"100%"}),i.player.off(null,null,i),i.blocking)i.vpaidControls||i.blocking.hide();else{i.player.setControls(!1);var t=i.player.getState();t!==lt&&t!==rt||i.player.pause(!0)}else i.prepareNonlinearAd(),i.player.play(!0),i.player.setControls(!0)},AdDurationChange:function(){i.sendEvent("remainingTimeChange",{duration:e.getAdDuration(),remainingTime:e.getAdRemainingTime()})},AdRemainingTimeChange:function(){i.sendEvent("remainingTimeChange",{duration:e.getAdDuration(),remainingTime:e.getAdRemainingTime()})},AdExpandedChange:function(){i.sendEvent("expandedChange",{expanded:e.getAdExpanded()})},AdSkipped:function(){i.sendEvent("skipped")},AdVideoFirstQuartile:function(){i.handleQuartile(e,1)},AdVideoMidpoint:function(){i.handleQuartile(e,2)},AdVideoThirdQuartile:function(){i.handleQuartile(e,3)},AdVideoComplete:function(){i.sendEvent("complete")},AdUserClose:function(){i.sendEvent("close")},AdImpression:function(){i.sendEvent("impression",{linear:e.getAdLinear()?"linear":"nonlinear"})},AdClickThru:function(t,e,s){i.sendEvent("click",{id:e,url:t,playerHandles:s})},AdError:function(e,s){t(i.toRemove),i.sendEvent("error",{message:e,code:s})}}},i.prototype.callback=function(){var t=this.vpaidAd=this.iframe.contentWindow.getVPAIDAd(),e=t.handshakeVersion("2.0");if(parseFloat(e)<1)throw new Error("Invalid vpaid version in handshake");this.listeners=this.genListeners(t),this._.each(this.listeners,t.subscribe,t);var i="normal",s=1e3,n={AdParameters:this.adParams},a=this.playerContainer.getElementsByClassName("jw-media")[0],r=this.video=a.getElementsByTagName("video")[0],o=this.iframe.contentWindow.document.createElement("div");o.className="jw-vpaid-wrapper",o.style.height="100%",this.iframe.contentWindow.document.body.appendChild(o),r?r.removeAttribute("preload"):(r=this.video=document.createElement("video"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),a.insertBefore(r,this.iframe),this.toRemove.push(r));var d={videoSlot:r,slot:o};t.initAd(a.clientWidth,a.clientHeight,i,s,n,d)},i.prototype.play=function(){this.vpaidAd.resumeAd()},i.prototype.pause=function(){this.vpaidAd.pauseAd()},i.prototype.stop=function(){if(this.vpaidAd)try{this.vpaidAd.stopAd()}catch(t){console.log("Unhandled exception from VPAID2 Creative stopAd",t)}},i.prototype.setVolume=function(t){this.vpaidAd.setAdVolume(t/100)},i.prototype.resize=function(){if(this.vpaidAd&&this.vpaidAd.resizeAd){var t=this.player.getFullscreen()||document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen,e=t?Wt:Xt;this.vpaidAd.resizeAd(this.player.getWidth(),this.player.getHeight(),e)}},i.prototype.destroy=function(){if(t(this.toRemove),this.removeEvents(),this.vpaidAd)try{this._.each(this.listeners,this.vpaidAd.unsubscribe,this.vpaidAd),this.vpaidAd.unsubscribe(this.setMuteCallback,"AdVolumeChange")}catch(e){console.log("Unhandled exception from VPAID2 Creative",e)}this.blocking=null},i.prototype.removeEvents=function(){this.player.off(null,null,this),this.off()},i.prototype.attachMedia=function(){},i.prototype.detachMedia=function(){},i.prototype.volume=function(){},i.prototype.mute=function(){},i.prototype.getState=function(){return this.vpaidState.linear?this.paused?ot:lt:dt},i}(),Jt=jwplayer.utils,Zt=jwplayer._,te=[],ee=function(){function t(e,i){var s=this;Gt(this,t),this.map=e,this.debugTrackFn=i,this.lastQuartile=0,this.progressEvents=[],this.started=!1,this.firedError=!1,this.hasComp=!1,Zt.map(e,function(t){if(e.hasOwnProperty(t)&&0===t.indexOf("progress")){var i=""+t.split("_")[1],n={key:t,offset:i,tracked:!1,percentage:!1};/^\d+%$/.test(i)?(n.percentage=!0,n.offset=parseFloat(i)):n.offset=Jt.seconds(i),s.progressEvents.push(n)}}),this.setFactories()}return t.prototype.getUrls=function(t){return this.map.hasOwnProperty(t)?this.map[t]:[]},t.prototype.addUrl=function(t,e){this.map.hasOwnProperty(t)?this.map[t].push(e):(this.map[t]=[],this.map[t].push(e))},t.prototype.trackPings=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.getUrls(t),s=[],n=[];Zt.map(i,function(t){if(t){Zt.map(e,function(i){e.hasOwnProperty(i)&&(t=t.replace(i,e[i]))});var i=new Image;i.src=t,s.push(t),n.push(i)}});for(var a=te.length;a--&&(te[a].width||te[a].complete);)te.length=a;Array.prototype.push.apply(te,n),Zt.isFunction(this.debugTrackFn)&&this.debugTrackFn({type:"ping",data:{pingType:t,urls:s,images:n}})},t.prototype.start=function(){this.started=!0,this.trackPings("start")},t.prototype.breakStart=function(){this.started=!0,this.trackPings("breakStart")},t.prototype.time=function(t,e){if(!(e<=1)){for(var i=(4*t+.05)/e|0;i>this.lastQuartile&&this.lastQuartile<3;)this.lastQuartile++,1===this.lastQuartile?this.trackPings("firstQuartile"):2===this.lastQuartile?this.trackPings("midpoint"):3===this.lastQuartile&&this.trackPings("thirdQuartile");this.trackProgress(t,e)}},t.prototype.trackProgress=function(t,e){for(var i=this.progressEvents.length;i--;){var s=this.progressEvents[i];if(!s.tracked){var n=s.offset;s.percentage&&(n=e*n/100),t>=n&&(s.tracked=!0,this.trackPings(s.key))}}},t.prototype.error=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:900;this.firedError=!0,this.trackPings("error",{MACRO_ERRORCODE:t})},t.prototype.factory=function(t){var e=this;return function(){e.trackPings(t)}},t.prototype.setFactories=function(){this.creativeView=this.factory("creativeView"),this.click=this.factory("click"),this.skip=this.factory("skip"),this.complete=this.factory("complete"),this.pause=this.factory("pause"),this.resume=this.factory("resume"),this.mute=this.factory("mute"),this.unmute=this.factory("unmute"),this.fullscreen=this.factory("fullscreen"),this.expand=this.factory("expand"),this.collapse=this.factory("collapse"),this.acceptInvitation=this.factory("acceptInvitation"),this.close=this.factory("close"),this.rewind=this.factory("rewind"),this.impression=this.factory("impression"),this.breakEnd=this.factory("breakEnd")},t}(),ie=jwplayer._,se=function(){function t(e,i,s,n,a,r){Gt(this,t),this.player=i,this.utils=i.utils,this._=i._,this.staticPlayer=s,this.companion=n,this.optionalParams=a,this.debugTrackFn=r,this.scheduledAd=e.scheduledAd(),this.vastBuffet=e.adBuffet(),this.vastAdPod=e.adPod(),this.vastAd=this.vastBuffet.length?this.vastBuffet[0]:null,this.adType=null,this.vpaidPlayer=null,this.instreamPlayer=null,this.blockingInstreamPlayer=null,this.mediaType=null,this.adPodItems=null,this.vpaidTimeout=null,this.vastOptions=null,this.duration=0,this.adPodIndex=0,this.initialIndex=0,this.utils.extend(this,i.Events)}return t.prototype.init=function(t){this.init=function(){throw new Error("Adplayer can only be initialized once")},this.blockingInstreamPlayer=t;var e=this.prepareAdPod();return!!e&&(this.playAd(),this.player.on("fullscreen",this.playerFullscreenHandler,this),this.player.on("volume",this.playerVolumeHandler,this),this.player.on("mute",this.playerMuteHandler,this),this.player.on("resize",this.playerResizeHandler,this),!0)},t.prototype.getProviderType=function(){var t=this.player.getProvider();return 0===t.name.indexOf("flash")?"flash":t.name},t.prototype.flashSwf=function(){var t=this.player.getContainer();return t.querySelector("object")},t.prototype.prepareAdPod=function(){var t=this,e=null,i=0,s=[],n=this.getProviderType();if(this.vastAd&&(o(this.vastAd,this.debugTrackFn),e=this.prepareAdPodItem(this.vastAd),e&&"vpaid"===e.adType&&!r(this.vastAd,n)&&(e=null)),this.vastAdPod)for(var a=null,d=0;d<this.vastAdPod.length;d++){var l=this.vastAdPod[d];o(l,this.debugTrackFn);var h=this.prepareAdPodItem(l);if(h){if(a!==h.adType&&"instream"===a)break;if(a=h.adType,"vpaid"!==h.adType||r(l,n)){var p=s.length+i===d;h&&p&&s.push(h)}else i++}else i++}if(!s.length&&!e)return this.adError("No Compatible Creatives",403),!1;var u=void 0;return s.length?(u=s,this.vastOptions=[],this._.map(u,function(e){t.vastOptions.push(t.getInstreamOptions(e.vastAd))})):(u=e,this.vastOptions=this.getInstreamOptions(this.vastAd)),this.adPodItems=u,this.adPodIndex=0,!0},t.prototype.prepareAdPodItem=function(t){t.tracker.linear="linear";var e=this.getProviderType(),i=(""+t.media[0].adType).toLowerCase()||"instream";"vpaid"!==i||r(t,e)||(i="instream");var s={vastAd:t,sources:[],adType:i};this.scheduledAd.skipoffset&&(s.skipoffset=this.scheduledAd.skipoffset);var n=t.media,a={};if(this._.map(n,function(t){s.sources.push({file:t.file,type:t.type}),a[t.file]={width:t.width||0,height:t.height||0}}),s=jwplayer.playlist.item(s),"instream"===i&&(s.sources=d(s.sources,e)),0===s.sources.length)return null;this.mediaType=(""+s.sources[0].mimeType).toLowerCase(),s.vastAd.selectedMedia=s.sources[0];var o=this.player.getSafeRegion(!0),l=null,h=null;return this._.map(s.sources,function(t){var e=a[t.file];e.width<=o.width&&(!l||e.width>a[l.file].width)&&(l=t),e.width>=o.width&&(!h||e.width<a[h.file].width)&&(h=t)}),l?(s.vastAd.selectedMedia=l,l["default"]=!0):h&&(s.vastAd.selectedMedia=h,h["default"]=!0),s},t.prototype.getInstreamOptions=function(t){var e=this.optionalParams.skipoffset>=0?this.optionalParams.skipoffset:null;return{skipoffset:t.skipoffset||this.scheduledAd.skipoffset||e,skipMessage:this.optionalParams.skipMessage,skipText:this.optionalParams.skipText}},t.prototype.getVastAd=function(t){if(this.adPodItems){var e=void 0;if(e=this.adPodItems.length?this.adPodItems[t]:this.adPodItems,e.vastAd)return e.vastAd}else if(this.vastAdPod&&this.vastAdPod.length)return this.vastAdPod[t];return this.vastAd},t.prototype.adError=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:900;clearTimeout(this.vpaidTimeout);var i=this.adEventObject();if(i.code=e,i.message=t,this.vastAdPod&&this.adPodIndex<this.vastAdPod.length-1)return void this.trigger("adPodError",i);var s=this.getVastAd(this.adPodIndex),n=s.tracker;n.error(e),s.wrappedTags&&(i.wrappedTags=s.wrappedTags),this.trigger(gt,i)},t.prototype.playAd=function(){var t=this.adPodItems[this.adPodIndex]||this.adPodItems;if(this.adType=t.adType,"vpaid"===this.adType)this.playVpaid(t.vastAd);else if("static"===this.adType)this.playStatic(),this.clearBlocking();else{var e=this._.isArray(this.adPodItems)?this.adPodItems.slice(this.adPodIndex):this.adPodItems,i=this._.isArray(this.vastOptions)?this.vastOptions.slice(this.adPodIndex):this.vastOptions;this.initialIndex=this.adPodIndex,this.playInstream(e,i),this.clearBlocking()}},t.prototype.clearVpaidBlocking=function(){if(this.vpaidPlayer.blocking){var t=this.vpaidPlayer.blocking;this.vpaidPlayer.blocking=null,this.clearBlocking(t)}},t.prototype.clearBlocking=function(t){t=t||this.blockingInstreamPlayer,t&&t!==this.instreamPlayer&&t.destroy()},t.prototype.getState=function(){return this.instreamPlayer?this.instreamPlayer.getState():this.vpaidPlayer?this.vpaidPlayer.getState():""},t.prototype.clearNonlinear=function(){this.staticPlayer.stop(),this.vpaidPlayer&&(this.clearVpaidBlocking(),this.vpaidPlayer&&(this.vpaidPlayer.stop(),this.vpaidPlayer.destroy(),this.vpaidPlayer=null))},t.prototype.destroy=function(){this.off(),this.removePlayerListeners(),this.instreamPlayer&&this.instreamPlayer.destroy(),this.vpaidPlayer&&(this.clearVpaidBlocking(),this.vpaidPlayer&&this.vpaidPlayer.destroy()),this.clearNonlinear(),this.vastLoader=null,this.player=null,this.vpaidPlayer=null,this.instreamPlayer=null,this.scheduledAd=null,this.vastBuffet=null,this.vastAd=null,this.vastAdPod=null},t.prototype.pause=function(){this.instreamPlayer?this.instreamPlayer.pause():this.vpaidPlayer&&this.vpaidPlayer.pause()},t.prototype.play=function(){this.instreamPlayer?this.instreamPlayer.play():this.vpaidPlayer&&this.vpaidPlayer.play()},t.prototype.removePlayerListeners=function(){this.player&&(this.player.off(pt,this.playerFullscreenHandler,this),this.player.off(ut,this.playerVolumeHandler,this),this.player.off(ct,this.playerMuteHandler,this)),this.instreamPlayer&&this.instreamPlayer.off(),this.vpaidPlayer&&(this.vpaidPlayer.removeEvents(),this.clearVpaidBlocking()),this.staticPlayer.stop(),this.staticPlayer.removeEvents()},t.prototype.adEventObject=function(){var t=this.scheduledAd._adQueue||{},e={id:this.scheduledAd._id,tag:this.scheduledAd._currentTag,client:"vast",witem:this.scheduledAd._waterfallIndex||1,wcount:t.length||1,viewable:this.player.getViewable()};return this.adPodItems&&this.adPodItems.length&&(e.sequence=this.adPodIndex+1,e.podcount=this.adPodItems.length),this.mediaType&&(e.creativetype=this.mediaType),this.scheduledAd._vmap&&(e.vmap=this.scheduledAd._vmap),e},t.prototype.playStatic=function(){this.vastAd.tracker.linear="nonlinear";var t=this.vastAd.media[0];this.vastAd.selectedMedia=t;var e=this.vastAd.clickthrough||"",i=this.staticPlayer;i.removeEvents(),
i.on("play",this.impressionHandler,this),i.on("play",this.playHandler,this),i.on("complete",this.combinedCompleteHandler,this),i.on("click",this.clickStaticHandler,this),i.on("error",this.staticErrorHandler,this),i.playAd(t.file,e,t.minDuration,this.scheduledAd._currentTag,this.scheduledAd.requestTimeout)},t.prototype.vpaidAdError=function(t,e){this.adError(t,e),this.adPodItems&&this.adPodItems.length-1>this.adPodIndex&&(this.vpaidPlayer&&this._.isFunction(this.vpaidPlayer.destroy)&&this.vpaidPlayer.destroy(),this.adPodIndex++,this.playAd())},t.prototype.playVpaid=function(t){var e=this;this.vpaidTimeout=setTimeout(function(){e.vpaidAdError("VPAID tag communication timeout")},this.scheduledAd.creativeTimeout),this.vastAd=t;var i=r(t,this.getProviderType());if(this.vastAd.selectedMedia=i,this.mediaType=i.type,"flash"===a(i)){var s=this.flashSwf();this.vpaidPlayer=new Yt(this.player,s,i.file,this.scheduledAd._currentTag,this.vastAd.adParams,this.optionalParams.vpaidcontrols)}else this.vpaidPlayer=new $t(this.player,i.file,this.scheduledAd._currentTag,this.vastAd.adParams,this.optionalParams.vpaidcontrols);this.blockingInstreamPlayer&&this.blockingInstreamPlayer.applyProviderListeners(this.vpaidPlayer),this.vpaidPlayer.blocking=this.blockingInstreamPlayer,this.vpaidPlayer.on("play",this.playHandler,this),this.vpaidPlayer.on("pause",this.pauseHandler,this),this.vpaidPlayer.on("quartile",this.quartileHandler,this),this.vpaidPlayer.on("remainingTimeChange",this.remainingTimeHandler,this),this.vpaidPlayer.on("click",this.clickVpaidHandler,this),this.vpaidPlayer.on("error",this.playbackErrorHandler,this),this.vpaidPlayer.on("impression",this.impressionHandler,this),this.vpaidPlayer.on("expandedChange",this.vpaidExpandedHandler,this),this.vpaidPlayer.on("close",this.adCloseHandler,this),this.vpaidPlayer.on("skipped",this.adSkipped,this),this.vpaidPlayer.on("stopped",this.endOfVpaidAdHandler,this),this.vpaidPlayer.on("complete",this.adCompleteHandler,this),this.vpaidPlayer.on("started",this.adStartedHandler,this)},t.prototype.playInstream=function(t,e){this.blockingInstreamPlayer?this.instreamPlayer=this.blockingInstreamPlayer:this.instreamPlayer=this.player.createInstream().init(),this.instreamPlayer.on("play",this.playHandler,this),this.instreamPlayer.on("pause",this.pauseHandler,this),this.instreamPlayer.on("time",this.timeHandler,this),this.instreamPlayer.on("playlistItem",this.playlistItemHandler,this),this.instreamPlayer.on("complete",this.adCompleteHandler,this),this.instreamPlayer.on("playlistComplete",this.endOfAdBreakHandler,this),this.instreamPlayer.on("mute",this.muteHandler,this),this.instreamPlayer.on("instreamClick",this.clickInstreamHandler,this),this.instreamPlayer.on("adSkipped",this.adSkipped,this),this.instreamPlayer.on("error",this.playbackErrorHandler,this),this.instreamPlayer.on("mediaError",this.playbackErrorHandler,this),this.instreamPlayer.loadItem(t,e)},t.prototype.playerFullscreenHandler=function(t){var e=this.getVastAd(this.adPodIndex),i=e.tracker;t.fullscreen&&i.started&&i.fullscreen()},t.prototype.playerResizeHandler=function(t){this.vpaidPlayer&&this.vpaidPlayer.resize(t)},t.prototype.playerVolumeHandler=function(t){this.vpaidPlayer&&this.vpaidPlayer.setVolume(t.volume)},t.prototype.playerMuteHandler=function(t){this.vpaidPlayer&&this.vpaidPlayer.setVolume(t.mute?0:this.player.getVolume())},t.prototype.playlistItemHandler=function(t){this.instreamPlayer&&(this.instreamPlayer.once("time",this.firstTimeChangeEvent,this),this.adPodIndex=t.index+this.initialIndex)},t.prototype.firstTimeChangeEvent=function(t){if(0!==t.position){this.off("time",this.firstTimeChangeEvent),this.instreamPlayer&&this.instreamPlayer.off("time",this.firstTimeChangeEvent,this);var e=this.getVastAd(this.adPodIndex),i=e.tracker;this.impressionHandler({linear:i.linear})}},t.prototype.impressionHandler=function(t){var e=this.getVastAd(this.adPodIndex),i=e.tracker;i.impression();var s=this.adEventObject();s.adposition=this.scheduledAd._position||"",s.adtitle=e.adTitle||"",s.adsystem=e.adsystem||"",s.wrapper=e.wrapper||"",s.vastversion=e.vastversion,s.mediafile={file:e.selectedMedia.file},s.linear=t.linear||i.linear,this.trigger(At,s)},t.prototype.playHandler=function(t){clearTimeout(this.vpaidTimeout);var e=this.getVastAd(this.adPodIndex),n=e.tracker,a=void 0;if(n.started)t.oldstate===ot&&(n.resume(),this.dispatchPlay(t));else{this.vpaidPlayer&&(n.linear=t.linear);var r=this.utils.extend({linear:n.linear},this.adEventObject(),this.getInstreamOptions(e));r.message=this.optionalParams.dynamicMessage||"",r.clickthrough=e.clickthrough,r.sequence&&(r.podMessage=this.optionalParams.podMessage||""),e.adTitle&&(r.title=e.adTitle),e.companions&&(r.companions=e.companions),this.player.dispatchEvent(kt,r),e.companions&&(a=this.adEventObject(),a.companions=i(e.companions),this.player.dispatchEvent(vt,a));var o=this.companion,d=void 0;d=this.utils.flashVersion()>9?e.companions:s(e.companions),this.optionalParams.companion&&d&&d.length&&(n.hasComp=o.addCompanion(this.optionalParams.companion,d)),n.start(),n.creativeView(),this.dispatchPlay(t)}},t.prototype.dispatchPlay=function(t){if("static"!==this.adType&&("vpaid"!==this.adType||"linear"===t.linear)){var e=t.oldstate,i=t.newstate,s=this.adEventObject();s.oldstate=e,s.newstate=i,this.player.dispatchEvent(wt,s),this.vpaidPlayer&&this.vpaidPlayer.trigger(at,{newstate:i,oldstate:e})}},t.prototype.pauseHandler=function(t){var e=this.getVastAd(this.adPodIndex),i=e.tracker;i.pause();var s=t.oldstate,n=t.newstate,a=this.adEventObject();a.oldstate=t.oldstate,a.newstate=t.newstate,this.player.dispatchEvent(Tt,a),this.vpaidPlayer&&this.vpaidPlayer.trigger(at,{newstate:n,oldstate:s})},t.prototype.remainingTimeHandler=function(t){t.duration?this.duration=t.duration:this.duration=Math.max(1,this.duration,t.remainingTime);var e=t.remainingTime>=0?this.duration-t.remainingTime:0;this.timeHandler({position:e,duration:this.duration})},t.prototype.quartileHandler=function(t){if(t.duration)this.duration=t.duration;else{var e=4*t.remainingTime/(4-t.quartile);this.duration=Math.max(this.duration,1,e)}this.timeHandler({position:this.duration*t.quartile*.25,duration:this.duration})},t.prototype.timeHandler=function(t){var e=this.getVastAd(this.adPodIndex),i=t.position,s=t.duration,n=s-i,a=e.tracker,r=this.optionalParams.dynamicMessage||"",o=this.optionalParams.podMessage||"";if(a&&a.time(i,s),r&&n>0){if(r=r.replace(/xx/gi,""+Math.ceil(n)),this.adPodItems&&this.adPodItems.length>1){var d=this.adPodIndex+1;o=o.replace(/__AD_POD_CURRENT__/g,""+d),o=o.replace(/__AD_POD_LENGTH__/g,""+this.adPodItems.length),r=o+r}this.instreamPlayer?this.instreamPlayer.setText(r):this.vpaidPlayer&&this.vpaidPlayer.blocking&&this.vpaidPlayer.blocking.setText(r)}var l=this.adEventObject();l.position=i,l.duration=s,this.player.dispatchEvent(bt,l)},t.prototype.combinedCompleteHandler=function(){this.adCompleteHandler(),this.endOfAdBreakHandler()},t.prototype.adCompleteHandler=function(){var t=this.getVastAd(this.adPodIndex),e=t.tracker;e.firedError||(e.complete(),this.player.dispatchEvent(yt,this.adEventObject()))},t.prototype.adCloseHandler=function(){var t=this.getVastAd(this.adPodIndex),e=t.tracker;e.firedError||e.close()},t.prototype.adStartedHandler=function(){this.player.dispatchEvent("adStarted",this.adEventObject())},t.prototype.endOfVpaidAdHandler=function(){return this.adPodItems&&this.adPodItems.length-1>this.adPodIndex?(this.vpaidPlayer&&this._.isFunction(this.vpaidPlayer.destroy)&&this.vpaidPlayer.destroy(),this.vpaidPlayer=null,this.adPodIndex++,void this.playAd()):void this.endOfAdBreakHandler()},t.prototype.endOfAdBreakHandler=function(){this.removePlayerListeners(),this.trigger(yt)},t.prototype.muteHandler=function(t){var e=this.getVastAd(this.adPodIndex),i=e.tracker;i&&(t.mute?(i.mute(),this.vpaidPlayer&&this.vpaidPlayer.setVolume(0)):(i.unmute(),this.vpaidPlayer&&this.vpaidPlayer.setVolume(this.player.getVolume()/100)))},t.prototype.clickStaticHandler=function(){var t=this.getVastAd(this.adPodIndex);this.player.pause(!0),this.clickThrough(t)},t.prototype.clickVpaidHandler=function(t){var e=this.getVastAd(this.adPodIndex);t&&t.url&&t.playerHandles&&(e.clickthrough=t.url),this.clickThrough(e)},t.prototype.clickInstreamHandler=function(){this.instreamPlayer.getState()!==ot&&this.clickThrough(this.getVastAd(this.adPodIndex))},t.prototype.clickThrough=function(t){t.tracker.click(),this.player.dispatchEvent(mt,this.adEventObject()),window.jwcast&&window.jwcast.player.id||t.clickthrough&&window.open(t.clickthrough)},t.prototype.adSkipped=function(){this.getVastAd(this.adPodIndex).tracker.skip(),this.player.dispatchEvent(Et,this.adEventObject())},t.prototype.playbackErrorHandler=function(t){var e=t.message||"Error Playing Ad Tag",i=t.code||400;this.vpaidPlayer&&this._.isFunction(this.vpaidPlayer.off)?(this.vpaidPlayer.off(),this.vpaidAdError(e,i)):this.adError(e,i)},t.prototype.staticErrorHandler=function(){this.adError("Unable to fetch NonLinear resource",502)},t.prototype.vpaidExpandedHandler=function(t){var e=this.getVastAd(this.adPodIndex),i=e.tracker;t.expanded?i.expand():i.collapse()},t}(),ne=jwplayer.utils,ae=jwplayer._,re=function(){function t(e){Gt(this,t),this.debugTrackFn=e,this.div=null,this.elem=null}return t.prototype.addCompanion=function(t,e){if(this.div=t,this.elem=document.getElementById(this.div.id),!this.elem)return!1;for(var i=0;i<e.length;i++)if(this.fitsDiv(e[i]))return this.placeCompanion(e[i]),!0;return!1},t.prototype.removeCompanion=function(){this.elem.innerHTML=""},t.prototype.sendPings=function(t){t=t.creativeView,t&&(ae.map(t,function(t){var e=new Image;e.src=t}),ae.isFunction(this.debugTrackFn)&&this.debugTrackFn({type:"companion",data:{trackers:t}}))},t.prototype.placeCompanion=function(t){if(this.removeCompanion(),"html"===t.type){var e=document.createElement("div");e.innerHTML=t.source;var i=e.getElementsByTagName("script");return i.length&&ae.map(i,function(t){var e=new ne.scriptloader(t.src);e.load(),t.parentElement.removeChild(t)}),this.elem.appendChild(e),void this.sendPings(t.trackers)}if("iframe"===t.type){var s=document.createElement("iframe");return s.height=this.div.height,s.width=this.div.width,s.src=t.source,s.scrolling="no",s.style.border="none",s.marginWidth=0,s.marginHeight=0,this.sendPings(t.trackers),this.elem.innerHTML="",void this.elem.appendChild(s)}if("application/x-shockwave-flash"===t.type){if(ne.isMSIE()){var n='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"\n                    width="100%" height="100%"\n                    id="'+this.elem.id+'" name="'+this.elem.id+'"\n                    tabindex=0">\n                    <param name="movie" value="'+t.source+'">\n                    <param name="allowfullscreen" value="true">\n                    <param name="allowscriptaccess" value="always">\n                    <param name="scale" value="exactfit">\n                    <param name="seamlesstabbing" value="true">\n                    <param name="wmode" value= "opaque">\n                </object>';this.elem.innerHTML=n}else{var a=document.createElement("object");a.setAttribute("type","application/x-shockwave-flash"),a.setAttribute("data",t.source),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("tabindex",0),l(a,"allowfullscreen","true"),l(a,"allowscriptaccess","always"),l(a,"seamlesstabbing","true"),l(a,"wmode","opaque"),this.elem.appendChild(a)}return void this.sendPings(t.trackers)}var r=new Image;r.src=t.source,ne.exists(t.clickthrough)&&(r.onclick=function(){var e=window.open(t.clickthrough,"_blank");e.focus()}),this.elem.innerHTML="",this.elem.appendChild(r),this.sendPings(t.trackers)},t.prototype.fitsDiv=function(t){return t.width===this.div.width&&t.height===this.div.height},t}(),oe=jwplayer.utils,de=jwplayer._,le=function(){function t(){Gt(this,t),this.preRoll=null,this.vmap=null,this.postRoll=null,this.midRolls=[],this.playedMidRolls=[]}return t.prototype.setPreRoll=function(t){this.preRoll=t},t.prototype.getPreRoll=function(){return h(this.preRoll,this.requestTimeout,this.creativeTimeout)},t.prototype.getPostRoll=function(){return h(this.postRoll,this.requestTimeout,this.creativeTimeout)},t.prototype.getNextMidRoll=function(t,e){if(this.sort(e),this.midRolls.length>this.playedMidRolls.length){var i=this.getClosestIndex(t,e);if(i>=0&&this.playedMidRolls.indexOf(i)<0){var s=this.midRolls[i];return this.playedMidRolls.push(i),h(s,this.requestTimeout,this.creativeTimeout)}}return null},t.prototype.getMidRolls=function(){var t=[];return oe.foreach(this.midRolls,function(e,i){t.push(h(i))}),t},t.prototype.reset=function(){this.playedMidRolls=[]},t.prototype.addMidRoll=function(t){this.midRolls.push(t)},t.prototype.setPostRoll=function(t){this.postRoll=t},t.prototype.sort=function(t){(!t||t<1)&&(t=1),this.midRolls.sort(function(e,i){return p(e._offSet,t)-p(i._offSet,t)})},t.prototype.sortVmap=function(t){this.sort(t);for(var e=this.getAllAds(),i=0;i<e.length;i++)e[i]._vmap.item=i+1},t.prototype.getAllAds=function(){var t=this.preRoll?[this.preRoll]:[],e=this.postRoll?[this.postRoll]:[];return t.concat(this.midRolls,e)},t.prototype.getAdScheduleEventObject=function(){var t=this.getAllAds(),e=[],i={tag:this.getVMAP(),client:"vast",adbreaks:[]};return de.map(t,function(t){e.push({type:t._type,offset:t._offSet,vmap:t._vmap})}),i.adbreaks=e,i},t.prototype.setVMAP=function(t){this.vmap=t},t.prototype.isVMAP=function(){return!!this.vmap},t.prototype.getVMAP=function(){return this.vmap},t.prototype.getClosestIndex=function(t,e){for(var i=this.midRolls.length;i--;)if(t>=p(this.midRolls[i]._offSet,e))return i;return-1},t}(),he=jwplayer._,pe=jwplayer.utils,ue=function(){function t(){Gt(this,t)}return t.prototype.getSchedule=function(t){var e=new le;if(e.requestTimeout=f(t.requestTimeout,st),e.creativeTimeout=f(t.creativeTimeout,nt),t.tag)e.setPreRoll({_offSet:"pre",_adQueue:u(t.tag),_waterfallIndex:0});else if(he.isString(t.vastxml))e.setPreRoll({_offSet:"pre",_adXML:t.vastxml});else{if(he.isString(t.schedule))return e.setVMAP(t.schedule),e;if(he.isString(t.adschedule))return e.setVMAP(t.adschedule),e;m(e,t)}return e.sort(),e},t.prototype.getOptParams=function(t){var e={cuetext:t.cuetext||J,dynamicMessage:t.admessage||G,podMessage:t.podmessage||Y,skipoffset:t.skipoffset||$,skipMessage:t.skipmessage||Z,skipText:t.skiptext||tt,vpaidcontrols:t.vpaidcontrols||!1},i=t.companiondiv;return i&&(e.companion={id:i.id,height:i.height,width:i.width}),e},t}(),ce=jwplayer.utils,fe=ce.UI,me=document.createElement("img"),ve=document.createElement("img");me.src=ve.src='data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><circle cx="32" cy="32" r="32" fill="#191919"/><line stroke="#CCC" stroke-width="6" x1="32" y1="20" x2="32" y2="44"/><line stroke="#CCC" stroke-width="6" x1="20" y1="32" x2="44" y2="32"/></svg>',me.className="jw-vast-nonlinear-open-button",ve.className="jw-vast-nonlinear-close-button";var ye={cursor:"pointer",position:"absolute",margin:"auto",left:0,right:0,bottom:0,display:"block"},ge="opacity 0.2s",Ae={"-webkit-transition":ge,transition:ge},Pe=function(){function t(e,i,s,n,a){Gt(this,t),this.player=e,this.div=n,this.staticURL=i,this.clickURL=s,this.loadTimer=-1,this.animationTimer=-1,this.banner=null,ce.extend(this,e.Events),this.banner=document.createElement("img"),this.banner.className="jw-banner",this.banner.id=this.player.id+"_vast_static",y([ve,me]),this.remove(me),this.div.appendChild(this.banner),this.div.appendChild(ve),this.loadTimer=setTimeout(this.imageLoadError.bind(this),a),this.banner.onerror=this.imageLoadError.bind(this),this.banner.onload=this.onLoaded.bind(this),this.banner.src=this.staticURL}return t.prototype.onLoaded=function(){return clearTimeout(this.loadTimer),0===this.banner.naturalWidth?void this.imageLoadError():(this.removeBannerEventListeners(),ce.style(ve,{top:-this.banner.height-8,bottom:this.banner.height-8,left:this.banner.width},!0),ce.style(me,{top:-16},!0),v([this.div,this.banner]),v(ve,.75),new fe(this.banner).on("click tap",this.sendClick.bind(this)),ce.isMobile()||(this.div.onmouseover=g,this.div.onmouseout=A),ve.onclick=ve.ontouchstart=this.collapse.bind(this),me.onclick=me.ontouchstart=this.expand.bind(this),void this.trigger(Ct.PLAY))},t.prototype.imageLoadError=function(){clearTimeout(this.loadTimer),this.trigger(Ct.ERROR),this.removeBanner()},t.prototype.sendClick=function(){this.trigger(Ct.CLICK)},t.prototype.collapse=function(t){var e=this;this.animationTimer===-1&&(t.preventDefault(),this.div.onmouseover=this.div.onmouseout=null,y([this.banner,ve,me]),this.div.appendChild(me),this.animationTimer=setTimeout(function(){e.remove(e.banner),e.remove(ve),v(me,.5),e.div.onmouseover=P,e.div.onmouseout=k,e.animationTimer=-1},250))},t.prototype.expand=function(t){var e=this;this.animationTimer===-1&&(t.preventDefault(),this.div.onmouseover=this.div.onmouseout=null,this.div.appendChild(this.banner),this.div.appendChild(ve),this.animationTimer=setTimeout(function(){v([e.banner,ve]),e.div.onmouseover=g,e.div.onmouseout=A,e.animationTimer=-1},50),y(me))},t.prototype.remove=function(t){this.div.contains(t)&&this.div.removeChild(t)},t.prototype.removeBannerEventListeners=function(){this.banner.onload=this.banner.onerror=null},t.prototype.removeBanner=function(){this.removeBannerEventListeners(),this.remove(this.banner)},t.prototype.removeListeners=function(){clearTimeout(this.loadTimer),clearTimeout(this.animationTimer),this.div.onmouseover=this.div.onmouseout=ve.onclick=me.onclick=null,this.off(),this.removeBannerEventListeners()},t.prototype.stop=function(){y([this.div,this.banner,ve,me]),setTimeout(this.removeBanner.bind(this),400),this.remove(ve),this.remove(me)},t}(),ke=function(){function t(e,i){Gt(this,t),this.player=e,this.div=i,this.startTime=0,this.minDur=0,ce.extend(this,e.Events),this.type="static",e.on("time",this.dispatchTime,this)}return t.prototype.playAd=function(t,e,i,s,n){this.minDur=ce.seconds(i),this.adTag=s,this["static"]&&(this["static"].removeListeners(),this["static"].stop()),this.div.style.opacity=0,this.div.style.visibility="visible";var a=ce.isFF()?{}:Ae;ce.style(this.div,ce.extend({top:"",position:"absolute",width:"100%"},a)),ce.style([ve,me],ce.extend({width:"18px",height:"18px",opacity:.75},ye,a)),ce.style(ve,{transform:"rotate(45deg)"}),this["static"]=new Pe(this.player,t,e,this.div,n),this["static"].on(Ct.PLAY,this.startAd,this),this["static"].on(Ct.CLICK,this.clickHandler,this),this["static"].on(Ct.ERROR,this.errorHandler,this)},t.prototype.dispatchTime=function(t){this.trigger(et,t)},t.prototype.startAd=function(){this.startTime=this.player.getPosition(),this.minDur>0&&(0===this.startTime?this.on(et,this.startTimingAd,this):this.on(et,this.timeAd,this)),this.sendEvent(Ct.PLAY)},t.prototype.startTimingAd=function(t){this.startTime=t.position,this.off(et,this.startTimingAd,this),this.on(et,this.timeAd,this)},t.prototype.timeAd=function(t){var e=t.position-this.startTime;e>this.minDur&&(this.off(et,this.timeAd,this),this.stop())},t.prototype.clickHandler=function(){this.sendEvent(Ct.CLICK)},t.prototype.errorHandler=function(){this.sendEvent(Ct.ERROR)},t.prototype.sendEvent=function(t,e){e=e||{},e.tag=e.tag||this.adTag,this.trigger(t,e)},t.prototype.removeEvents=function(){this.off()},t.prototype.getState=function(){return lt},t.prototype.stop=function(){this.startTime&&this["static"]&&(this.startTime=0,this.minDur=0,this.off(et,this.startTimingAd,this),this.off(et,this.timeAd,this),this["static"].removeListeners(),this["static"].stop(),this.sendEvent(Ct.COMPLETE))},t.prototype.pause=function(){},t}(),Te=jwplayer.utils,we=jwplayer._,Ee=function(){function t(e){Gt(this,t),this._parsedAds=[],this._error=null,e&&this.parse(e)}return t.prototype.parsedAds=function(){return this._parsedAds},t.prototype.error=function(){return this._error},t.prototype.parse=function(t){var e=this,i=void 0,s=void 0,n=[];"VAST"===t.nodeName?i=t:(i=w(t,"VAST")[0],i||(i=w(t,"VideoAdServingTemplate")[0])),i||this.throwError(101,"Invalid VAST response"),s="VideoAdServingTemplate"===i.tagName?1:parseFloat(b(i,"version")||0);var a=w(i,"Ad");we.map(a,function(t){var i=e.parseAd(s,t);i.vastversion=s,n.push(i)}),this._parsedAds=n},t.prototype.parseAd=function(t,e,i){i=i||{};var s=w(e,"InLine")[0],n=w(e,"Wrapper")[0],a=s?s:n,r=a?I(w(a,"AdTitle")[0]):"",o=void 0;return i.sequence=b(e,"sequence"),i.adTitle=r,(!t||t>3||t<1)&&this.throwError(102,"Vast version not supported"),a?(t>=2?(o=x(a),S(a,"Impression",o.trackers),S(a,"Error",o.trackers)):o=V(a),n&&(o.wrappedURI=I(w(n,"VASTAdTagURI")[0])||I(w(n,"VASTAdTagURL")[0])),o=H(i,o)):this.throwError(101,"Invalid VAST response"),o},t.prototype.throwError=function(t,e){var i=this;throw this._error={code:t,message:e,toString:function(){return i.code+" "+i.message}},this._error},t}(),be=function(){function t(e,i,s){Gt(this,t),this._scheduledAd=e,this.player=i,this.utils=i.utils,this._=i._,this.options=s||{},this.utils.extend(this,i.Events),this._history=[],this.loadedAds=[],this.parser=null,this.xmlhttp=null,this.errorSent=!1}return t.prototype.flashSwf=function(){var t=this.player.getContainer();return t.querySelector("object")},t.prototype.genCallback=function(t,e){var i=this.player.id+":vast:"+e.name+":"+Math.random().toString(16).substr(2);return t.on(i,e,this),i},t.prototype.load=function(t){this._history.push(t),this.errorSent=!1,this.xmlhttp=this.getXhrRequest(t)},t.prototype.getXhrRequest=function(t){var e=this,i=function(i){e.ajaxComplete(i,t)},s=function(i,s){if(e.player){var r=e.flashSwf();return r&&"Invalid XML"!==i&&"Timeout"!==i&&e.utils.crossdomain(s)?void r.triggerFlash("loadXml",s,e.genCallback(r,n),e.genCallback(r,a)):void e.ajaxError(i,t)}},n=function(i){e.parseXmlString(i,t)},a=function(i){e.utils.log(i),e.ajaxError(i,t)};return this.utils.ajax(t,i,s,{withCredentials:!0,retryWithoutCredentials:!0,requireValidXML:!0,timeout:this._scheduledAd.requestTimeout})},t.prototype.destroy=function(){D(this.xmlhttp),this.player=null},t.prototype.scheduledAd=function(){return this._scheduledAd},t.prototype.allAds=function(){return this.loadedAds},t.prototype.adPod=function(){var t=[];return this.utils.foreach(this.loadedAds,function(e,i){i.sequence&&t.push(i)}),t.sort(function(t,e){return t.sequence-e.sequence}),t},t.prototype.adBuffet=function(){var t=[];return this.utils.foreach(this.loadedAds,function(e,i){i.sequence||t.push(i)}),t},t.prototype.history=function(){return this._history},t.prototype.parseXmlString=function(t,e){this.ajaxComplete({responseXML:N(t,this.utils)},e)},t.prototype.ajaxComplete=function(e,i){var s=this;this.parser=this.parser||new Ee;try{this.parser.parse(e.responseXML)}catch(n){return void this.sendErrorEvent(n.message,n.code||900,i)}var a=this.parser.parsedAds();a&&a.length?(this.loadedAds=a,this.options.wrapper=this.options.wrapper||[],this.options.wrapper.push(this.loadedAds[0].adsystem),this.utils.foreach(this.loadedAds,function(e,i){if(i.wrappedURI){s.options.wrappedTags=s.options.wrappedTags||[],s.options.wrappedTags.push(i.wrappedURI);var n=new t(s._scheduledAd,s.player,s.options);n.on(ht,function(){s.replaceWrappedAd(i,n.allAds())}),n.on(ft,function(t){s.sendAdpodErrorEvent(t.message,t.code,t.url),s.destroyWrappedAd(i,n)}),n.load(i.wrappedURI)}else s.options.wrapper.length>1&&(i.wrapper=s.options.wrapper.slice(0,-1),i.wrappedTags=s.options.wrappedTags)}),this.checkComplete()):this.sendErrorEvent("Ad Tag Empty",101,i)},t.prototype.destroyWrappedAd=function(t,e){var i=this._.indexOf(this.loadedAds,t);this.loadedAds.splice(i,1),e.destroy(),this.checkComplete()},t.prototype.replaceWrappedAd=function(t,e){var i=j(t,e,this.utils),s=this._.indexOf(this.loadedAds,t);Array.prototype.splice.apply(this.loadedAds,[s,1].concat(i)),this.checkComplete()},t.prototype.checkComplete=function(){var t=!1;this.utils.foreach(this.loadedAds,function(e,i){i.wrappedURI&&(t=!0)}),t||this.validateVast()},t.prototype.validateVast=function(){var t=this.loadedAds.slice(0),e=t.length;this._.map(t,function(e){e.media&&e.media.length||t.length--});var i=0===e,s=t.length!==e;return i||s?void this.sendErrorEvent("Ad Tag Empty",101,this._history[this._history.length-1]):void this.trigger(ht,{vloader:this})},t.prototype.ajaxError=function(t,e){"Invalid XML"===t?this.sendErrorEvent(t,100,e):this.sendErrorEvent("VAST could not be loaded",301,e)},t.prototype.firstUrl=function(){return this._history&&this._history.length?this._history[0]:""},t.prototype.sendAdpodErrorEvent=function(t,e,i){return 1===this.loadedAds.length?void this.sendErrorEvent(t,e,i):void this.trigger("adPodError",{message:t,code:e,vloader:this,url:this.firstUrl()||i,wrappedUrl:i})},t.prototype.sendErrorEvent=function(t,e,i){this.errorSent||(this.errorSent=!0,this.trigger(ft,{message:t,code:e,vloader:this,url:this.firstUrl()||i,wrappedUrl:i}))},t}(),_e={},Ie=function(t,e){var i=this,s=_e[e];return s?s:(function(t,e){t.jwplayerEntitlements=e()}(this,function(){return function(t,e,i){var s={canPlayAds:!0},n=new t.key(e),a=n.edition();if("unlimited"===a)return i(s);var r=n.token(),o=["//","entitlements.jwplayer.com","/",r,".json"];"file:"===window.location.protocol&&o.unshift("https:"),t.ajax(o.join(""),function(t){s.canPlayAds=!t||!t.response||t.response.canPlayAds!==!1,i(s)},function(){i(s)},{timeout:1e4,responseType:"json"})}}),_e[e]=new Promise(function(s,n){i.jwplayerEntitlements(t,e,function(t){return t.canPlayAds?void s():void n({message:"Ad Limit Reached"})})}))},Ce=/^((https?:)?\/\/)?(secure)?pubads\.g\.doubleclick\.net\/gampad\/ads\?[\S]*$/,Se=/^((https?:)?\/\/)?bid\.g\.doubleclick\.net\/dbm\/vast\?[\S]*$/,xe=/^((https?:)?\/\/)?ad\.doubleclick\.net(\/ddm)?\/pfadx\/[\S]*$/,Ve=function(t,e,i){function s(e){if(e){St&&(I(St),St=null);var i=function(i){St=null;try{T(i.responseXML,xt),t.dispatchEvent("adSchedule",xt.getAdScheduleEventObject())}catch(s){return void B({id:K,message:"Error parsing VMAP",code:1002,vmap:e})}if(at&&(Q(xt),Ct)){var n=d({type:Pt});n&&O()}},s=function(t){St=null,G.log(t),Ct&&O(),B({id:K,message:"Error Loading VMAP Schedule",code:"Timeout"===t?1007:1008,vmap:e})};St=G.ajax(e,i,s,{withCredentials:!0,retryWithoutCredentials:!0,requireValidXML:!0,timeout:xt.requestTimeout})}}function n(){at=!0,_t=new ke(t,i),It=new re(tt),it=Vt.getOptParams(e)}function a(t){vt=!!t.active}function r(t){et.trigger(lt,t)}function o(e){var i=G.isMobile()&&!Z&&("pre"===rt||t.isBeforePlay()||0===t.getPosition());i?(e&&e.type===Pt||t.getState()===dt)&&(et.off(lt,v),et.once(lt,v)):v()}function d(t){if(vt)return!1;var e=xt.getPreRoll();return St?(o(t),!1):!(!ot&&e)||(bt=p(e),u(e,t),!1)}function l(t){if(!vt){var e=xt.getNextMidRoll(t.position,t.duration);e&&(bt=p(e),c(e,t))}}function h(t){if(!vt){var e=xt.getPostRoll();!pt&&e&&(bt=p(e),f(e,t))}}function p(t){return t._trackers?new ee(t._trackers,tt):null}function u(t,e){t._position="pre",ot=!0,t._id=k(12),m(t,e)}function c(t,e){t._position="mid",t._id=k(12),m(t,e)}function f(e,i){e._position="post",pt=!0,t.detachMedia(),e._id=k(12),m(e,i)}function m(t,e){rt=t._position,clearTimeout(wt),wt=-1,"nonlinear"!==t._type&&(Ct||o(e)),t._adXML?(t._currentTag=t._currentTag||"clientloadedtag_"+ut++,P(t)):t._adQueue?A(t):(G.log("scheduled ad has no url or xml",t),O())}function v(){Ct=t.createInstream().init(),et.trigger("blockingStarted")}function y(e){var i=xt;g(e),i!==xt&&xt.isVMAP()&&s(U(xt.getVMAP(),t,q(),it))}function g(e){var i=t.getPlaylistItem(e.index);xt=$.isObject(i)&&i.adschedule?Vt.getSchedule(i):Rt,R(),L(),j(),pt=!1,ot=!1,Q(xt),xt.reset()}function A(e){kt=e;var i=e._waterfallIndex||0,s=e._adQueue[i],n=U(s,t,q(),it);e._waterfallIndex=i+1,e._currentTag=n,$.isFunction(tt)&&tt({type:"tagReplacement",data:{actualTag:n,originalTag:s}}),w(e,n),b(e).load(n)}function P(t){t._currentTag=t._currentTag||t._adXML.toString(),w(t,t._currentTag),b(t).parseXmlString(t._adXML)}function k(t){return new Array(t+1).join((Math.random().toString(36)+"00000000000000000").slice(2,18)).slice(0,t)}function w(e,i){t.dispatchEvent("adRequest",E(e,i))}function E(t,e){var i=t._adQueue||{},s={},n=t.adbreakid,a=t._adTagQueue,r=t.skipoffset;if(n&&(s.adbreakid=n),a){var o=t._waterfallIndex-1;o=o<0?0:o,s.adtagid=a[o]}return $.isUndefined(r)||(s.skipoffset=r),$.extend(s,{id:t._id,tag:e||t._currentTag,client:"vast",adposition:t._position,offset:t._offSet,witem:t._waterfallIndex||1,wcount:i.length||1})}function b(e){var i=new be(e,t);return i.on(ht,S),i.on(ft,F),i.on("adPodError",N),ct.push(i),bt&&!bt.started&&bt.breakStart(),i}function _(t){for(var e=ct.length;e--;)ct[e]===t&&(ct.splice(e,1),t.destroy())}function I(t){t.onload=null,t.onreadystatechange=null,t.onerror=null,"abort"in t&&t.abort()}function C(){St&&(I(St),St=null),R(),L(),j(),t.setCues([])}function S(t){var e=t.vloader.scheduledAd();Ct||"nonlinear"===e._type?x(t):(et.off("blockingStarted"),et.once("blockingStarted",function(){x(t)}))}function x(e){var i=e.vloader;clearTimeout(wt),wt=-1,kt.isWaterfalling||j(),_(i);var s=new se(i,t,_t,It,it,tt);s.on(gt,M),s.on(At,H),s.on("adPodError",B);var n=s.init(Ct);return n?(Et=Ct,Ct=null,et.off("blockingStarted"),et.off(lt,v),Et&&Et.on("adBreakEnd",function(){bt&&bt.breakEnd()}),s.on(yt,D),void mt.push(s)):void s.destroy()}function V(){j(),pt=!1,ot=!1}function R(){for(var t=ct.length;t--;){var e=ct[t];ct.length--,e.destroy()}}function L(){et.off(lt,v);for(var t=mt.length;t--;){var e=mt[t];mt.length--,e.destroy()}}function M(e){if(Tt=!1,B(e),!Tt&&X(kt)){Ct=Ct||Et;var i=$.extend({},kt);return i._offset=0,i.isWaterfalling=!0,void m(i)}L(),Tt=!1,wt=setTimeout(function(){wt=-1,0===ct.length&&("post"===rt&&t.attachMedia(),O())},0)}function H(e){kt={},t.dispatchEvent(At,e)}function D(){0===ct.length&&"post"===rt&&t.attachMedia()}function j(){if(mt.length){var t=mt[mt.length-1];t.clearNonlinear()}}function O(){if(Ct){var t=Ct;Ct=null,t.destroy(),et.off("blockingStarted"),et.off(lt,v)}Et=null}function N(t){var e=t.vloader,i=E(e.scheduledAd(),t.url);i.message=t.message,i.code=t.code,t.wrappedUrl!==t.url&&(i.wrappedTag=t.wrappedUrl),Tt=!1,B(i)}function F(t){var e=t.vloader,i=e.allAds();if(_(e),i&&i.length){var s=i[0];if(s){var n=s.trackers;if(n&&n.error){var a=new ee(n,tt);a.error(t.code)}}}if(N(t),!Tt&&X(kt)){var r=$.extend({},kt);return r._offset=0,r.isWaterfalling=!0,void m(r)}L(),Tt=!1,wt===-1&&(wt=setTimeout(function(){wt=-1,0===ct.length&&O()},0))}function B(e){G.extend(e,{client:"vast"}),bt&&bt.error(e.code),t.dispatchEvent(gt,e)}function q(){var t=window.location.href;return t=t.match(new RegExp(/^[^\/]*:\/\/\/?([^\/]*)/)),t&&t.length>1?t[1]:""}function Q(e){var i=e.getMidRolls(),s=[];i.length&&G.foreach(i,function(t,e){"nonlinear"!==e._type&&s.push({begin:e._offSet,text:it.cuetext})}),t.setCues(s)}var W=this,G=t.utils,Y=t.getConfig().key,$=t._,J=t.getConfig(),Z=!!J.sdkplatform,tt=e.debug&&e.trackFn?e.trackFn:null,et=this,it={},at=!1,rt="",ot=!1,pt=!1,ut=0,ct=[],mt=[],vt=!1,kt={},Tt=!1,wt=-1,Et=void 0,bt=void 0,_t=void 0,It=void 0,Ct=void 0,St=void 0,xt=void 0,Vt=new ue;this.version="7.9.1";var Rt=xt=Vt.getSchedule(e);xt.isVMAP()&&s(U(xt.getVMAP(),t,q(),it)),G.extend(this,t.Events),t.on("destroyPlugin",function(){C()}),t.on({ready:n,beforePlay:d,cast:a,play:r,time:l,beforeComplete:h,playlistItem:y,playlistComplete:g,complete:V},this),t.pauseAd=function(t){if(t=!$.isBoolean(t)||t,mt.length){var e=mt[mt.length-1];t?e.pause():e.play()}},t.playAd=function(t){Tt=!0,j();var e=void 0,i=0===it.requestTimeout?1/0:it.requestTimeout,s=0===it.creativeTimeout?1/0:it.creativeTimeout;e=$.isArray(t)?t.slice(0):[t];var n={_id:k(12),_adQueue:e,_waterfallIndex:0,_offset:0,_position:"api",requestTimeout:i||st,creativeTimeout:s||nt};m(n)},Ie.call(this,G,Y)["catch"](function(e){C(),t.off(null,null,W),t.playAd=G.noop,t.trigger(gt,{id:K,client:z,message:"Ad Error: "+e.message,code:900,tag:""})}),this.destroy=C},Re=window.jwplayerPluginJsonp||window.jwplayer().registerPlugin;Re(z,"7.9",Ve,"vast.swf")}();
